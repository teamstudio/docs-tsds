# データベース設計の再設計/設計置換 

Teamstudio CIAO! を使用してデータベースまたはデータベースのリストの設計を更新します。

## データベースの設計の再設計/設計置換をするには: 
1. 設計を更新するデータベースまたはテンプレートに関するプロモーションパスを選択します。
2. **[作成]**アクションボタンをクリックし**[設計の更新]**を選択します。 **[データベース設計の更新]** 文書が表示されます:  
   ![Refresh Design Document](img/bsrefresh.png)
3. わかりやすい名前を [ 説明] フィールドに入力します（**「設計一覧の更新」**など）。
4. ターゲットサーバー上で更新するデータベースのないテンプレートを昇格しない場合は、**[更新するデータベースがない場合はプロモーションを失敗とする]** オプションを選択します。
5. **[ターゲットサーバー]** でデータベースを更新するサーバーを選択します。
    * 更新に関する制限が CIAO! 管理者によって設定されている場合、このフィールドには、昇格の対象となるターゲットサーバーのリストだけが表示されます。そうでない場合は、ユーザーが適切なサーバーを選択できます。
6. モードは、**[設計の更新]** (再設計)または **[設計の置換]** のいずれかを選択します。
    * **[設計の更新] - [更新の前に現在の設計を削除する]** を選択しない場合、CIAO! は Notes の設計更新 API をコールして設計要素を更新します。そうでない場合は、設計の更新前にターゲットの設計内のすべてを削除します。
    * **[ 設計の置換]** - [ ターゲットデータベースの「更新禁止」オプションを優先する] を選択しない場合は、CIAO! はターゲットデータベース内のすべての要素を Notes の設計更新 API をコールして削除します。そしてテンプレートのすべての要素がデータベースにコピーします。そうでない場合は、[ ターゲットデータベースの「更新禁止」オプションを優先する]が設定されていない要素が削除されます。
7. [データベースタイトルの設定] フィールドで、次のオプションを選択します:
    * **[変更しない]** - 現在のデータベースタイトルが維持されます。
    * **[テンプレートと同じ]** - 更新に使用するテンプレートと同じタイトルが使用されます。
    * **[カスタム]** - 新しい名前を入力します。
8. テンプレートがターゲットサーバーに移動した後に更新する必要がある各データベースのパスを [更新するデータベース] フィールドに入力します。ワイルドカードを使用して複数のターゲットを指定できます。例えば、**mail¥\*** は「mail」ディレクトリー内のすべてのファイルを更新します。ワイルドカードの文法は LotusScript の **Like** ステートメントと同じです。

!!! note
    設計置換と更新の前に現在の設計を削除するオプション付きの再設計は破壊的操作となり、ターゲットデータベースの設計を置き換える前に設計を恒久的に削除します。この操作は多くの状況下では安全ではありますが、予期しない副作用も発生する可能性があります。例えば、フォルダー設計に依存するデータベースへの設計置換は設計内でフォルダーを削除し置換しますが、現在のフォルダーにある文書がその参照関係を削除するため更新後にすべてのフォルダー内に文書がないといった状態が発生します。設計置換においては、この振る舞いは Notes クライアントから実施する設計置換と異なります。 Notes クライアントからの設計置換は設計を削除せず単にテンプレート名を変更し新しいテンプレートから再設計を行っているからです。弊社では、設計を事前に削除する必要がある状況がない限り、更新の前に現在の設計を削除するオプションを付けずに再設計をすることをお勧めします。
 
文書を保存し、閉じます。

新しい [設計の更新] エントリが右側のペインの適用先データベースの下に表示されます。
<figure markdown="1">
  ![Refresh Design Step](img/bsrefresh2.png)
</figure>